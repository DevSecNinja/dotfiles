#!/bin/bash
# This script installs Fish shell if not already present
# Runs once per installation

set -e

if command -v fish >/dev/null 2>&1; then
    echo "âœ… Fish shell already installed"
    exit 0
fi

echo "ğŸ“¦ Installing Fish shell..."

{{- if eq .chezmoi.os "linux" }}
    {{- if eq .chezmoi.osRelease.id "ubuntu" "debian" }}
# Ubuntu/Debian
if command -v apt-get >/dev/null 2>&1; then
    sudo apt-get update
    sudo apt-get install -y fish
fi
    {{- else if eq .chezmoi.osRelease.id "fedora" }}
# Fedora
sudo dnf install -y fish
    {{- else if eq .chezmoi.osRelease.id "arch" }}
# Arch Linux
sudo pacman -S --noconfirm fish
    {{- end }}
{{- else if eq .chezmoi.os "darwin" }}
# macOS
if command -v brew >/dev/null 2>&1; then
    brew install fish
else
    echo "âŒ Homebrew not found. Please install Homebrew first."
    exit 1
fi
{{- end }}

echo "âœ… Fish shell installed successfully!"
echo "ğŸ’¡ To set Fish as your default shell, run: chsh -s $(which fish)"
